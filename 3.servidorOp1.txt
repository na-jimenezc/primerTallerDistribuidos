import java.io.*;
import java.net.*;
import java.util.*;

public class ServidorOperacion1 {
    public static void main(String[] args) throws IOException {
        ServerSocket serverSocket = new ServerSocket(6000); // ServidorOperacion2 usa puerto 7000
        System.out.println("Servidor de Operación 1 iniciado...");

        while (true) {
            Socket socket = serverSocket.accept();
            new Thread(() -> {
                try {
                    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                    PrintWriter out = new PrintWriter(socket.getOutputStream(), true);

                    // Recibir datos del servidor de cálculo
                    String datos = in.readLine();
                    int[] arreglo = Arrays.stream(datos.split(",")).mapToInt(Integer::parseInt).toArray();

                    // Calcular suma
                    int suma = Arrays.stream(arreglo).sum();

                    // Enviar resultado
                    out.println(suma);
                    socket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }).start();
        }
    }
}